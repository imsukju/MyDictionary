### TCP Connection Establishment (연결 설정)
![connection establishment](../resource/wiresharkTCP/WireShark%20connection%20establishment%20in%20tcp.png)
#### 1. **15번 패킷 (SYN)**:
   - **송신자:** 127.0.0.1:50103 (클라이언트)
   - **수신자:** 127.0.0.1:5001 (서버)
   - **프로토콜:** TCP
   - **내용:** 클라이언트가 서버에 연결을 요청합니다. 이 요청은 **SYN** 플래그가 설정된 패킷입니다. 클라이언트는 서버와 TCP 연결을 설정하기 위해 이 패킷을 전송합니다.
   - **윈도우 크기:** 65535 (클라이언트가 수신할 수 있는 데이터의 최대 크기)
   - **MSS (최대 세그먼트 크기):** 65495 (클라이언트가 한 번에 받을 수 있는 최대 데이터 크기)
   - **윈도우 스케일:** 256 (윈도우 크기를 확장하는 옵션)
   - **SACK_PERM (선택적 ACK 허용):** 서버와의 연결에서 선택적 ACK를 사용할 수 있음을 알리는 플래그

#### 2. **16번 패킷 (SYN, ACK)**:
   - **송신자:** 127.0.0.1:5001 (서버)
   - **수신자:** 127.0.0.1:50103 (클라이언트)
   - **프로토콜:** TCP
   - **내용:** 서버가 클라이언트의 SYN 요청을 승인하고 **SYN, ACK** 플래그가 설정된 패킷을 전송합니다. 이 패킷은 서버가 연결 설정을 받아들였음을 알리는 신호입니다.
   - **ACK 번호:** 1 (클라이언트가 보낸 SYN 패킷에 대한 확인 응답)
   - **윈도우 크기:** 65535
   - **MSS:** 65495
   - **윈도우 스케일:** 256
   - **SACK_PERM:** 선택적 ACK 사용 가능

#### 3. **17번 패킷 (ACK)**:
   - **송신자:** 127.0.0.1:50103 (클라이언트)
   - **수신자:** 127.0.0.1:5001 (서버)
   - **프로토콜:** TCP
   - **내용:** 클라이언트가 서버의 SYN/ACK 패킷을 승인하며 ACK 패킷을 전송합니다. 이 ACK 패킷은 3-way handshake의 마지막 단계로서, 연결이 성공적으로 설정되었음을 나타냅니다.
   - **ACK 번호:** 1 (서버가 보낸 SYN 패킷에 대한 응답)
   - **윈도우 크기:** 327424 (윈도우 크기 확장 옵션 적용)

#### **결론:**
이 세 개의 패킷은 TCP 연결 설정 과정에서 발생하는 **3-way handshake**입니다. 
1. 클라이언트는 서버에 **SYN** 패킷을 보내어 연결을 요청합니다.
2. 서버는 이를 받아들여 **SYN, ACK** 패킷을 응답합니다.
3. 클라이언트는 마지막으로 **ACK** 패킷을 보내어 연결을 확립합니다.

### TCP Data Transfer (데이터 전송)
![connection Data Transfer](../resource/wiresharkTCP/wireshark%20Data%20Transfer.png)
#### 4. **13번 패킷 (PSH, ACK)**:
   - **송신자:** 127.0.0.1:50103 (클라이언트)
   - **수신자:** 127.0.0.1:5001 (서버)
   - **프로토콜:** TCP
   - **내용:** 클라이언트가 서버에게 9바이트의 데이터를 전송합니다. **PSH (Push)** 플래그가 설정되어 있으며, 이는 즉시 데이터를 처리해야 함을 나타냅니다.
   - **시퀀스 번호:** 1 (이 시퀀스 번호에서 데이터를 보내기 시작)
   - **ACK 번호:** 1 (이전에 서버가 보낸 데이터에 대한 확인)
   - **윈도우 크기:** 1279 (수신 버퍼에 남은 공간)
   - **데이터 길이:** 9바이트

#### 5. **14번 패킷 (ACK)**:
   - **송신자:** 127.0.0.1:5001 (서버)
   - **수신자:** 127.0.0.1:50103 (클라이언트)
   - **프로토콜:** TCP
   - **내용:** 서버가 클라이언트로부터 받은 9바이트의 데이터를 확인하고, ACK 패킷을 보냅니다. 이 패킷은 데이터가 성공적으로 수신되었음을 나타냅니다.
   - **시퀀스 번호:** 1
   - **ACK 번호:** 10 (클라이언트가 보낸 9바이트 데이터에 대한 확인)

#### 6. **15번 패킷 (PSH, ACK)**:
   - **송신자:** 127.0.0.1:5001 (서버)
   - **수신자:** 127.0.0.1:50103 (클라이언트)
   - **프로토콜:** TCP
   - **내용:** 서버가 클라이언트에게 39바이트의 데이터를 전송합니다. **PSH (Push)** 플래그가 설정되어 있습니다.
   - **시퀀스 번호:** 1 (서버 측에서 데이터 전송 시작)
   - **ACK 번호:** 10 (클라이언트의 데이터를 확인)
   - **윈도우 크기:** 8442 (서버의 수신 버퍼 남은 공간)
   - **데이터 길이:** 39바이트

#### 7. **16번 패킷 (ACK)**:
   - **송신자:** 127.0.0.1:50103 (클라이언트)
   - **수신자:** 127.0.0.1:5001 (서버)
   - **프로토콜:** TCP
   - **내용:** 클라이언트가 서버로부터 받은 39바이트 데이터를 확인하고, ACK 패킷을 전송합니다.
   - **시퀀스 번호:** 10 (이전 데이터가 이미 전송된 상태)
   - **ACK 번호:** 40 (서버가 보낸 39바이트 데이터에 대한 확인)

#### **결론:**
이 패킷들은 TCP 연결이 설정된 후 데이터를 주고받는 과정을 보여줍니다.
1. 클라이언트가 9바이트 데이터를 전송하고 서버가 이를 확인.
2. 서버가 39바이트 데이터를 전송하고 클라이언트가 이를 확인.
모두 **PSH**와 **ACK** 플래그를 사용하여 데이터 전송과 수신 확인이 이루어졌습니다.

### TCP Connection Termination (연결 종료)
![Connection Termination](../resource/wiresharkTCP/wireshark%20Connection%20Termination.png)
#### 8. **2번 패킷 (FIN, ACK)**:
   - **송신자:** 127.0.0.1:50194 (클라이언트)
   - **수신자:** 127.0.0.1:5001 (서버)
   - **프로토콜:** TCP
   - **내용:** 클라이언트가 서버에 더 이상 데이터를 전송하지 않겠다는 신호로 **FIN** 플래그가 설정된 패킷을 보냅니다. 이는 클라이언트가 연결을 종료하고 싶다는 의사 표시입니다.
   - **시퀀스 번호:** 1
   - **ACK 번호:** 1
   - **윈도우 크기:** 8442

#### 9. **3번 패킷 (ACK)**:
   - **송신자:** 127.0.0.1:5001 (서버)
   - **수신자:** 127.0.0.1:50194 (클라이언트)
   - **프로토콜:** TCP
   - **내용:** 서버가 클라이언트의 FIN 패킷을 확인하고 **ACK** 패킷을 보냅니다. 이 패킷은 클라이언트의 연결 종료 요청을 수락했음을 의미합니다.
   - **시퀀스 번호:** 1
   - **ACK 번호:** 2 (클라이언트가 보낸 FIN 패킷에 대한 응답)

#### 10. **4번 패킷 (FIN, ACK)**:
   - **송신자:** 127.0.0.1:5001 (서버)
   - **수신자:** 127.0.0.1:50194 (클라이언트)
   - **프로토콜:** TCP
   - **내용:** 서버 역시 더 이상 데이터를 전송하지 않겠다는 신호로 **FIN** 패킷을 전송하고, 연결을 종료하려 합니다.
   - **시퀀스 번호:** 1 (서버도 연결 종료를 요청)
   - **ACK 번호:** 2

#### 11. **5번 패킷 (ACK)**:
   - **송신자:** 127.0.0.1:50194 (클라이언트)
   - **수신자:** 127.0.0.1

:5001 (서버)
   - **프로토콜:** TCP
   - **내용:** 클라이언트가 서버의 FIN 패킷을 확인하고 마지막 **ACK**를 보내며, 연결이 완전히 종료됩니다.
   - **시퀀스 번호:** 2
   - **ACK 번호:** 2

#### **결론:**
이 패킷들은 TCP 연결 종료 과정인 **4-way handshake** 절차를 보여줍니다.
1. 클라이언트가 **FIN**을 보내며 연결 종료를 요청.
2. 서버가 이를 **ACK**로 확인.
3. 서버도 **FIN**을 보내며 연결 종료를 요청.
4. 클라이언트가 **ACK**를 보내고 연결이 완전히 종료됩니다.

TCP 표준에 따라 모든 절차가 정상적으로 이루어졌습니다.