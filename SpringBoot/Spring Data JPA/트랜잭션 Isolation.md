### 트랜잭션의 격리 수준 (Isolation Level)

**격리 수준**은 여러 트랜잭션이 동시에 실행될 때 각 트랜잭션이 다른 트랜잭션의 영향을 얼마나 받는지 결정하는 기준입니다. 격리 수준을 조정하여 데이터의 일관성과 무결성을 유지하며 성능과 충돌 가능성을 균형 있게 맞추는 것이 중요합니다. 격리 수준에 따라 발생할 수 있는 특정 문제(예: Dirty Read, Non-Repeatable Read, Phantom Read)가 달라집니다.

### 격리 수준의 종류

1. **READ UNCOMMITTED**
   - 커밋되지 않은 데이터도 읽을 수 있어 가장 낮은 격리 수준입니다. 
   - **Dirty Read** 발생 가능: 하나의 트랜잭션이 다른 트랜잭션의 커밋되지 않은 데이터를 읽으면, 해당 데이터가 나중에 롤백될 경우 무결성이 깨집니다.
   - **예시**: `트랜잭션 A`가 잔액을 `100`에서 `50`으로 줄이는 작업을 수행 중이지만 아직 커밋하지 않은 상태에서, `트랜잭션 B`가 잔액을 읽어 잘못된 값 `50`을 사용합니다.

2. **READ COMMITTED**
   - 커밋된 데이터만 읽을 수 있으며, 트랜잭션이 수행되는 동안 다른 트랜잭션에서 데이터를 변경할 수 있습니다.
   - **Non-Repeatable Read** 발생 가능: 동일한 쿼리를 두 번 실행했을 때 중간에 다른 트랜잭션이 데이터를 수정하여 결과가 달라질 수 있습니다.
   - **예시**: `트랜잭션 A`가 상품 재고를 `100`으로 조회한 후 주문 처리 중 `트랜잭션 B`가 재고를 `80`으로 변경하면, 다시 조회 시 다른 값이 조회됩니다.

3. **REPEATABLE READ**
   - 트랜잭션이 시작된 이후 같은 데이터에 대해 동일한 결과를 보장합니다. 트랜잭션이 완료될 때까지 다른 트랜잭션이 데이터를 수정할 수 없습니다.
   - **Phantom Read** 발생 가능: 한 트랜잭션이 특정 조건의 데이터를 조회한 후 다른 트랜잭션이 해당 조건에 맞는 데이터를 추가/삭제할 경우, 조회 결과가 달라질 수 있습니다.
   - **예시**: `트랜잭션 A`가 특정 주문 목록을 조회하고, 그 후 `트랜잭션 B`가 새로운 주문을 추가해도 `트랜잭션 A`에는 반영되지 않습니다.

4. **SERIALIZABLE**
   - 트랜잭션 간의 간섭이 없도록 완전히 독립적으로 실행되며 가장 높은 격리 수준을 제공합니다. 모든 트랜잭션이 직렬적으로 실행되어 데이터 충돌이 방지됩니다.
   - **문제 발생 방지**: Dirty Read, Non-Repeatable Read, Phantom Read를 모두 방지하지만, 성능 저하가 가장 큽니다.
   - **예시**: `트랜잭션 A`가 입금 작업 중일 때 `트랜잭션 B`는 해당 계좌에서 출금할 수 없으며, `트랜잭션 A`가 완료된 후에야 실행됩니다.

### 문제 유형 요약

| 문제 유형         | 설명 |
|------------------|------|
| **Dirty Read**          | 커밋되지 않은 데이터를 읽어 무결성 문제가 발생할 수 있습니다. |
| **Non-Repeatable Read** | 동일한 쿼리 결과가 트랜잭션 중간에 다른 트랜잭션에 의해 달라지는 현상입니다. |
| **Phantom Read**        | 트랜잭션 중간에 다른 트랜잭션이 조건에 맞는 데이터를 삽입/삭제하여 조회 결과가 달라집니다. |

### 성능과의 관계

격리 수준이 높아질수록 데이터 일관성이 강화되지만, 동시에 시스템 성능에 부정적인 영향을 미칩니다. 데이터베이스는 트랜잭션 격리를 위해 **락(Lock)**을 사용하여 트랜잭션 충돌을 방지하며, 이 과정에서 **공유 락(Shared Lock)**과 **배타 락(Exclusive Lock)**을 적용합니다.

- **공유 락(Shared Lock)**: 읽기 작업 시 사용되며, 다른 트랜잭션이 읽기는 가능하지만 쓰기는 불가능합니다.
- **배타 락(Exclusive Lock)**: 읽기 및 쓰기 모두 불가능하게 하여, 데이터의 완전한 일관성을 보장합니다.

격리 수준 선택 시 데이터 무결성 필요와 성능 요구 사항을 고려하는 것이 중요합니다.