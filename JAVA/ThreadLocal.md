스레드 로컬(ThreadLocal)이란 **각각의 스레드**(Thread)가 독립적으로 자신만의 **변수를 저장**할 수 있도록 도와주는 메커니즘입니다. 쉽게 말해, **같은 변수를 여러 스레드가 동시에 사용하지 않도록**, 스레드마다 고유의 변수를 가지게 만드는 것입니다.

### 왜 스레드 로컬이 필요할까요?
멀티 스레드 환경에서는 여러 스레드가 동시에 같은 변수를 사용할 수 있기 때문에, 데이터가 뒤섞이거나 잘못된 값으로 덮어쓰일 수 있는 **경쟁 상태(race condition)** 문제가 발생할 수 있습니다. 이를 방지하려면 변수 접근을 동기화하거나 별도로 처리해야 하지만, 스레드 로컬을 사용하면 이런 문제를 쉽게 해결할 수 있습니다.

### 스레드 로컬의 특징
1. **스레드마다 독립적인 값**을 가진다.
   - 각 스레드가 `ThreadLocal`을 통해 저장한 값은 **다른 스레드와 공유되지 않습니다**.
   - 즉, 한 스레드가 특정 값을 설정해도 다른 스레드에는 영향을 미치지 않으며, **자기 자신만의 값**을 가지고 있습니다.
   
2. **스레드가 종료되면 값도 함께 제거**된다.
   - 스레드가 종료되면 `ThreadLocal`에 저장된 값은 자동으로 정리됩니다. 따라서, 메모리 누수를 방지할 수 있습니다.

### 어떻게 동작할까요?
`ThreadLocal`을 사용하면, 각 스레드는 자신만의 변수를 가지고 있으며, 다른 스레드와 변수를 공유하지 않습니다. 예를 들어, 한 스레드가 `ThreadLocal`에 값을 설정해도, 다른 스레드는 그 값을 알 수 없습니다. 이는 특히 **스레드 간의 데이터 충돌을 방지**하는 데 유용합니다.

### `ThreadLocal` 사용 예시
```java
// ThreadLocal 객체 생성
ThreadLocal<String> threadLocal = new ThreadLocal<>();

// 스레드 A에서 값을 설정
threadLocal.set("스레드 A의 값");

// 스레드 B에서 값을 설정
threadLocal.set("스레드 B의 값");

// 스레드 A에서 값을 가져옴
String valueA = threadLocal.get(); // "스레드 A의 값"

// 스레드 B에서 값을 가져옴
String valueB = threadLocal.get(); // "스레드 B의 값"
```

### `ThreadLocal`의 활용 예: Spring Security
Spring Security에서는 `SecurityContextHolder`가 `SecurityContext` 객체를 **스레드 로컬**에 저장합니다. 이는 요청마다 사용자 인증 정보를 고유하게 유지하기 위해 사용됩니다. 예를 들어, 각 HTTP 요청마다 별도의 스레드가 사용되므로, `SecurityContextHolder`는 요청이 들어올 때마다 해당 스레드의 `SecurityContext`에 사용자의 인증 정보를 저장하고 관리합니다.

이렇게 하면, 각 요청마다 별도의 인증 정보가 관리되므로, 다른 사용자의 요청과 인증 정보가 섞이는 것을 방지할 수 있습니다.

### 요약
- **스레드 로컬(ThreadLocal)**: 각 스레드가 자신만의 변수를 가지도록 해주는 기법.
- **사용 이유**: 멀티 스레드 환경에서 변수 간의 충돌이나 데이터 오염을 방지하기 위해 사용.
- **사용 예**: Spring Security의 `SecurityContextHolder`에서 각 스레드의 사용자 인증 정보를 관리할 때 사용.

이해하기 쉽게 표현하면, 여러 사람이 같은 공용 메모장에 글을 쓰는 대신, 각각의 사람이 자신만의 노트를 가지고 쓰는 것과 비슷합니다.