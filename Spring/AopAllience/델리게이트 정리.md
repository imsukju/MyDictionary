### 델리게이트(delegate)의 정의

델리게이트(delegate)란 한 객체가 수행해야 할 작업을 다른 객체에게 위임하는 디자인 패턴 또는 개념입니다. 델리게이트 패턴에서 위임자(Delegator)는 자신이 직접 작업을 수행하지 않고, 해당 작업을 처리할 수 있는 다른 객체에게 그 작업을 위임합니다. 이때, 작업을 실제로 수행하는 객체가 델리게이트 객체입니다.

델리게이트 패턴은 유연한 코드 구조를 가능하게 하며, 객체 간의 결합도를 낮추는 데 도움을 줍니다. 델리게이트는 특히 프록시(Proxy) 패턴이나 AOP(Aspect-Oriented Programming)에서 자주 사용됩니다. 여기서는 프록시 델리게이트를 중심으로 자세히 설명하겠습니다.
```java
// Service 인터페이스 - 델리게이트와 델리게이터가 구현해야 할 메서드를 정의
public interface Service {
    void performTask(); // 인터페이스에 정의된 메서드
}

// RealService 클래스 - 델리게이트 객체
// 이 클래스는 실제 작업을 수행하는 델리게이트입니다.
public class RealService implements Service {

    @Override
    public void performTask() {
        System.out.println("RealService: 실제 작업을 수행합니다."); // 실제 작업 수행
    }
}
```

여기서 `RealService`는 `Service` 인터페이스를 구현하는 실제 서비스 객체입니다. `RealService` 클래스는 클라이언트가 요청한 작업을 수행하는데, 프록시 패턴을 사용하면 이 작업을 프록시 객체가 가로채고, 필요에 따라 `RealService`로 위임합니다.
### 인터페이스와 델리게이트

델리게이트 객체는 일반적으로 인터페이스를 통해 정의된 메서드를 구현하여, 실제로 그 메서드가 호출될 때 작업을 수행합니다. 프록시 패턴에서도 마찬가지로, 프록시 객체는 델리게이트 객체의 메서드를 호출하여 클라이언트의 요청을 처리합니다.

### 프록시 델리게이트의 개념

프록시 델리게이트는 프록시(Proxy) 패턴에서 클라이언트와 실제 서비스 객체(타겟 객체) 사이에 위치하여, 클라이언트의 요청을 받아들이고, 이를 타겟 객체에 전달하거나 추가 작업을 수행한 뒤 결과를 반환하는 역할을 합니다.

- **프록시 객체**: 클라이언트가 직접 타겟 객체와 상호작용하지 않고, 대신 프록시 객체와 상호작용합니다. 프록시 객체는 타겟 객체로의 접근을 제어하고, 필요할 경우 메서드 호출 전에 추가 작업(예: 로깅, 인증, 트랜잭션 관리)을 수행할 수 있습니다.
  
- **델리게이트 객체**: 프록시 객체 내부에서 클라이언트의 요청을 실제로 처리하거나, 타겟 객체로 요청을 전달하는 역할을 하는 객체입니다. 프록시 객체는 이 델리게이트 객체를 사용하여 실제 작업을 위임합니다.

### 위임하는 객체(Delegator) - 프록시 델리게이터

위임하는 객체는 델리게이트 패턴에서 작업을 실제로 수행하는 대신, 해당 작업을 델리게이트 객체에게 위임하는 주체입니다. 프록시 패턴에서는 프록시 객체가 바로 이 위임하는 객체(Delegator)에 해당합니다. 위임하는 객체는 클라이언트의 요청을 가로채고, 이를 델리게이트 객체로 전달하여 처리합니다.

```java
// ServiceProxy 클래스 - 프록시 객체 (Delegator), 클라이언트의 요청을 가로채어 처리하는 클래스
// 이 클래스는 delegator(위임자)로, 클라이언트의 요청을 가로채어 delegate에게 작업을 위임합니다.
public class ServiceProxy implements InvocationHandler {

    private final Object target;  // delegate (RealService), 실제 작업을 수행하는 객체

    public ServiceProxy(Object target) {
        this.target = target;  // Delegator가 작업을 위임할 대상인 delegate 객체를 설정 (RealService)
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        System.out.println("ServiceProxy: 작업을 수행하기 전에 추가 작업을 합니다."); // 프록시의 추가 작업
        
        // 여기서 method.invoke(target, args) 부분에서 target은 delegate입니다.
        // delegator인 ServiceProxy가 클라이언트의 요청을 delegate인 RealService에게 위임하는 부분입니다.
        Object result = method.invoke(target, args);  // delegate에게 작업을 위임
        
        System.out.println("ServiceProxy: 작업을 수행한 후 추가 작업을 합니다."); // 프록시의 추가 작업
        
        return result;  // 최종 결과 반환
    }

    // 프록시 객체 생성 메서드
    public static Service createProxy(Service target) {
        return (Service) Proxy.newProxyInstance(
                target.getClass().getClassLoader(),
                target.getClass().getInterfaces(),
                new ServiceProxy(target)  // 프록시 객체를 생성하면서 delegate 객체를 설정 (RealService)
        );
    }
}
```

이 예제에서 `ServiceProxy`는 프록시 클래스이며, `InvocationHandler` 인터페이스를 구현하고 있습니다. 이 클래스는 클라이언트의 요청을 가로채어, 실제 작업을 수행할 타겟 객체에 이를 위임하는 역할을 합니다.

- **프록시 객체의 역할**: `ServiceProxy` 클래스는 클라이언트의 요청을 먼저 받아서, 작업을 수행하기 전에 추가적인 작업(예: 로깅)을 수행합니다. 그런 다음, 메서드 호출을 타겟 객체에 위임하고, 결과를 반환합니다.

- **타겟 객체에의 위임**: `invoke` 메서드 내에서 `method.invoke(target, args)` 코드를 통해 실제 작업을 타겟 객체(`target`)에게 위임합니다.



### 프록시 클래스와 타겟 클래스 사이의 델리게이트

프록시 클래스와 타겟 클래스 사이에서 델리게이트 객체는 중간에 위치하여 메서드 호출을 처리합니다.

- **프록시 클래스의 역할**: 프록시 클래스는 메서드 호출을 가로채고, 이를 델리게이트 객체에 전달합니다. 델리게이트 객체는 전달된 메서드 호출을 처리하거나 타겟 객체에 이를 전달하여 실제 작업을 수행하게 합니다.

- **타겟 클래스에의 위임**: 델리게이트 객체는 프록시 클래스에서 받은 메서드 호출을 타겟 클래스에 전달합니다. 이 과정에서 델리게이트 객체는 단순히 메서드 호출을 전달하는 역할을 할 수도 있고, 추가적인 로직(예: 입력 값 검증, 결과 처리)을 수행할 수도 있습니다.

### 델리게이트 객체의 실제 구현

델리게이트 객체는 프록시와 타겟 사이에서 메서드 호출을 실제로 처리합니다. 이 델리게이트 객체는 인터페이스에 정의된 메서드를 구현하여 클라이언트의 요청을 처리합니다.

- **프록시와 타겟 사이에 있는 델리게이트**: 델리게이트 객체는 프록시 객체로부터 위임받은 메서드 호출을 처리하는 역할을 합니다. 이때 델리게이트 객체는 메서드 호출을 타겟 객체로 전달하거나, 프록시가 정의한 추가 로직을 수행합니다.

- **다른 델리게이트와의 구분**: 프록시 패턴에서의 델리게이트는 주로 메서드 호출의 흐름을 제어하거나 보조적인 작업을 수행하는 데 중점을 둡니다. 이와 달리, 다른 디자인 패턴에서의 델리게이트는 특정 기능을 모듈화하여 여러 곳에서 재사용할 수 있도록 하는 역할을 하기도 합니다.

### 인트로덕션(Introduction)과 델리게이트

AOP(Aspect-Oriented Programming)에서 인트로덕션은 기존 클래스에 새로운 메서드나 속성을 동적으로 추가하는 기능입니다. 인트로덕션된 기능을 실제로 구현하는 객체도 델리게이트라고 할 수 있습니다.

- **인트로덕션의 역할**: AOP에서 인트로덕션은 기존 객체에 새로운 메서드를 추가하여, 그 객체가 새로운 기능을 가지도록 합니다. 이때 추가된 메서드를 처리하는 객체가 델리게이트 역할을 합니다.

- **인트로덕션을 구현한 델리게이트**: 인트로덕션된 메서드를 실제로 구현하여, 기존 클래스에 새로운 기능을 추가합니다. 이 델리게이트 객체는 기존 타겟 클래스와는 별도의 객체로, 새로운 메서드를 처리하고 클라이언트의 요청을 처리합니다.

### 요약 정리

- **델리게이트(delegate)**: 델리게이트는 위임받은 작업을 실제로 처리하는 객체입니다. 프록시 패턴에서 델리게이트는 클라이언트의 요청을 타겟 객체에 전달하거나 직접 처리합니다.
  
- **프록시 클래스**: 프록시 클래스는 클라이언트의 요청을 가로채어 델리게이트 객체로 전달합니다. 델리게이트 객체는 이 요청을 처리하거나 타겟 클래스에 전달합니다.

- **인트로덕션(Introduction)**: AOP에서 기존 클래스에 새로운 메서드를 추가할 때, 이 메서드를 처리하는 객체도 델리게이트로 볼 수 있습니다. 인트로덕션된 메서드를 실제로 구현하고 처리하는 역할을 합니다.

델리게이트 패턴을 통해 코드의 유연성을 높이고, 객체 간의 결합도를 낮출 수 있습니다. 프록시 델리게이트는 특히 로깅, 인증, 트랜잭션 관리와 같은 부가적인 작업을 처리하는 데 유용합니다.




>1. **프록시 패턴에서의 Delegate**:
    - 프록시 패턴에서 프록시는 인터페이스를 구현하며, 클라이언트는 이 프록시 객체를 통해 메서드를 호출합니다. 프록시가 이 메서드 호출을 가로채고, 타겟 클래스(실제 비즈니스 로직을 가진 클래스)에 위임합니다.
    - 이때 "위임(delegate)"은 메서드 구현 자체를 프록시가 직접 수행하기보다는, 타겟 클래스에 메서드 호출을 전달(위임)하는 것을 의미합니다. 즉, 프록시가 인터페이스를 구현하긴 하지만, 실질적인 로직은 타겟 클래스에서 수행됩니다.
>2. **위임 패턴에서의 Delegate**:
    - 위임 패턴에서 `delegate` 객체는 주로 클래스가 자신의 일부 책임을 다른 객체에 위임할 때 사용됩니다. 이 경우, `delegate` 객체는 위임받은 작업을 실제로 수행하는 역할을 합니다.
    - 예를 들어, 어떤 클래스가 자신이 도입한 인터페이스의 메서드를 직접 구현하는 대신, 해당 메서드의 호출을 다른 객체(delegate 객체)에게 전달하여 그 객체가 실질적인 구현을 담당하게 할 수 있습니다.
>- **프록시 패턴**에서는 프록시가 인터페이스를 구현하지만, 그 메서드의 실질적인 실행은 타겟 클래스에 위임됩니다.
>- **위임 패턴**에서는 `delegate` 객체가 실제로 인터페이스의 메서드를 구현하여 해당 작업을 수행합니다.
