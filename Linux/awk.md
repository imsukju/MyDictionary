**`awk`**는 Unix/Linux 환경에서 강력한 텍스트 처리 도구입니다. 데이터를 읽고, 패턴을 매칭하며, 텍스트를 조작하거나 분석하는 데 사용됩니다. 주로 **로그 파일 분석**, **데이터 필터링**, **형식 변경** 등에 활용됩니다.

---

### 기본 개념
1. **입력 데이터 처리**:
   - `awk`는 텍스트 파일이나 명령의 출력에서 **행(row)**을 읽고 이를 **필드(field)** 단위로 처리합니다.
   - 기본적으로 공백이나 탭 문자를 기준으로 필드를 나눕니다.

2. **프로그램 구조**:
   - `awk` 스크립트는 다음과 같은 구조로 이루어져 있습니다:
     ```
     pattern { action }
     ```
     - `pattern`: 조건(패턴)을 지정하며, 이 조건에 맞는 행에만 동작을 수행합니다.
     - `action`: 조건에 맞는 행에서 수행할 작업(출력, 필드 조작 등)을 정의합니다.

3. **작동 방식**:
   - 파일이나 입력의 각 행을 읽고, 패턴을 확인하며, 지정된 작업을 수행합니다.
   - 패턴을 생략하면 모든 행에 대해 작업을 수행합니다.

---

### 필드와 변수
1. **기본 필드**:
   - 각 행의 필드는 `$1`, `$2`, ..., `$NF`로 접근할 수 있습니다.
   - `$0`은 전체 행을 의미합니다.
   - `NF`는 필드의 총 개수를 나타냅니다.

2. **내장 변수**:
   - `NR`: 현재까지 처리한 행 번호.
   - `FNR`: 현재 파일에서 처리한 행 번호 (다중 파일 입력 시).
   - `FS`: 입력 필드 구분자 (기본값: 공백).
   - `OFS`: 출력 필드 구분자 (기본값: 공백).
   - `RS`: 입력 레코드 구분자 (기본값: 줄바꿈).
   - `ORS`: 출력 레코드 구분자 (기본값: 줄바꿈).

---

### 사용 예제

1. **기본 사용법**:
   - `awk`를 사용하여 특정 필드만 출력:
     ```bash
     echo "apple orange banana" | awk '{ print $2 }'
     ```
     출력: `orange`

2. **조건에 따라 출력**:
   - 특정 조건을 만족하는 행만 출력:
     ```bash
     awk '$3 > 50 { print $1, $2 }' data.txt
     ```
     - 세 번째 필드가 50보다 큰 행에서 첫 번째와 두 번째 필드를 출력.

3. **패턴 매칭**:
   - 특정 문자열이 포함된 행 출력:
     ```bash
     awk '/error/ { print $0 }' log.txt
     ```
     - `log.txt`에서 `error`가 포함된 모든 행을 출력.

4. **필드 구분자 변경**:
   - CSV 파일에서 특정 필드만 출력:
     ```bash
     awk -F',' '{ print $2 }' file.csv
     ```
     - 필드 구분자를 콤마로 설정하고, 두 번째 필드 출력.

5. **필드 연산**:
   - 필드 값의 합계 계산:
     ```bash
     awk '{ sum += $3 } END { print sum }' data.txt
     ```
     - 세 번째 필드의 합계를 계산하여 출력.

---

### 고급 사용법

1. **다중 조건**:
   - `if-else`를 사용하여 복잡한 조건 처리:
     ```bash
     awk '{ if ($3 > 50) print $1; else print $2 }' data.txt
     ```

2. **함수 사용**:
   - 내장 함수로 문자열 조작:
     ```bash
     awk '{ print toupper($1) }' data.txt
     ```
     - 첫 번째 필드를 대문자로 변환.

3. **변수 초기화 및 사용**:
   ```bash
   awk -v threshold=50 '$3 > threshold { print $1 }' data.txt
   ```
   - 외부에서 변수를 전달하여 조건을 설정.

4. **파일 출력**:
   ```bash
   awk '/error/ { print $0 > "errors.log" }' log.txt
   ```
   - `log.txt`에서 `error`가 포함된 행을 `errors.log` 파일에 저장.

---

### 실행 방법
1. **직접 입력**:
   ```bash
   echo "apple orange banana" | awk '{ print $2 }'
   ```

2. **파일 처리**:
   ```bash
   awk '{ print $1, $3 }' data.txt
   ```

3. **스크립트 파일 사용**:
   - `script.awk` 파일에 코드를 작성:
     ```awk
     { print $1, $NF }
     ```
   - 실행:
     ```bash
     awk -f script.awk data.txt
     ```

---

### `awk`의 주요 장점
- 간결하고 강력한 텍스트 분석 및 처리.
- 정규 표현식을 통한 유연한 매칭.
- 다중 파일 및 행 처리에 뛰어남.
- 로그 분석, 데이터 파싱, 형식 변환에 적합.

`awk`는 간단한 데이터 처리에서 복잡한 텍스트 분석까지 다양한 작업을 빠르게 처리할 수 있는 도구입니다!